---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import ProfileCard from "../components/ProfileCard.astro";
import TagList from "../components/TagList.astro";
import PostList from "../components/PostList.astro";
import { getAllTags } from "../utils/tags";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
const tags = await getAllTags();
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<!-- 簡易プロフィール -->
	<div class="mb-12">
		<ProfileCard variant="compact" />
	</div>

	<!-- タグ一覧 -->
	<div class="mb-8">
		<TagList tags={tags} />
	</div>
	<div>
		<PostList posts={posts} />
	</div>
</BaseLayout>
